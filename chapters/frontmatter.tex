% Helper file that pulls subchapters together.

% In conjunction, packages polyglossia and cleveref do some serious witchcraft.
% If we call these \crefname redefinitions in the preamble, it does not work.
% Also does not work with \AtBeginDocument. Tried with both a macro inside the
% redefinition, and just plain text.
\crefname{listing}{\lstlistingname}{\lstlistingname s}
\Crefname{listing}{\lstlistingname}{\lstlistingname s}

% Set initial pages to alpha, so that they do not collide with later Arabic numbering
% in the generated PDF. This won't show in print because page numbers aren't displayed
% until later. But you will be able to print the title page by printing page 'a', which
% would otherwise overlap with page '1', aka the first actual text page.
\pagenumbering{alph}
\maketitle% Print main title page
\subimport{frontmatter/}{colophon}

\makeatletter
    % Switch titlepage style around
    \ifdefstring{\cookbook@titlestyle}{book}{%
        \renewcommand*{\cookbook@titlestyle}{thesis}%
    }{%
        \renewcommand*{\cookbook@titlestyle}{book}%
    }
    \subtitle{An alternative title page style}
    %
    % Run this file again, since it contains the \renewcommand definitions
    \input{chapters/other/titlepage.tex}
\makeatother

\maketitle% Print alternative title page

\frontmatter% In KOMAScript, resets pagenumber, uses Roman numerals etc.

% Note that \subincludefrom{}{} cannot be nested, therefore us \subimport
\subimport{frontmatter/}{task}
\subimport{frontmatter/}{authorship_declaration}
\subimport{frontmatter/}{abstract}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Lists of Content
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% addchap is KOMA equivalent for \chapter*, but also creates ToC entry, see also
% https://tex.stackexchange.com/a/116085/120853
% Use built-in macro \glossaryname for proper internationalization. With polyglossia, it
% will contain \text<language>{<glossary translation>}, which has been taken care of
% using \pdfstringdefDisableCommands{} in the class file
\addchap{\glossaryname}%
\label{ch:glossary}

\emph{%
    \TransGlossaryLegend{}%
}%

% Print "unsorted" glossaries; these are in fact sorted, but externally using bib2gls.
% These will throw 'Token not allowed in PDF, removing \text<language>' warning.
% Specify title= manually if that gets too annoying.
\printunsrtglossary[
    type=symbols,
    style=symbunitlong,
]
\printunsrtglossary[
    type=numbers,
    style=numberlong,
]
\printunsrtglossary[
    type=subscripts,
    style=mcolalttree,
    nonumberlist,
]
\printunsrtglossary[
    type=abbreviations,
    style=long3colheader,
]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\listoffigures%

\listoftables%

\listofexamples%

\lstlistoflistings%

\subimport{frontmatter/}{preface}
